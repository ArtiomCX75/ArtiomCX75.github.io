(function () {var l={};var w={};var j={};function Z(e,r,{blocked:t,upgrade:$,blocking:n,terminated:a}={}){const o=indexedDB.open(e,r),d=h(o);return $&&o.addEventListener("upgradeneeded",e=>{$(h(o.result),e.oldVersion,e.newVersion,h(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),d.then(e=>{a&&e.addEventListener("close",()=>a()),n&&e.addEventListener("versionchange",()=>n())}).catch(()=>{}),d}const fa=(e,r)=>r.some(r=>e instanceof r);let W,Y;function ja(){return W||(W=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ga(){return Y||(Y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const N=new WeakMap,I=new WeakMap,Q=new WeakMap,H=new WeakMap,E=new WeakMap;function da(e){const r=new Promise((r,o)=>{const t=()=>{e.removeEventListener("success",$),e.removeEventListener("error",a)},$=()=>{r(h(e.result)),t()},a=()=>{o(e.error),t()};e.addEventListener("success",$),e.addEventListener("error",a)});return r.then(r=>{r instanceof IDBCursor&&N.set(r,e)}).catch(()=>{}),E.set(r,e),r}function ea(e){if(I.has(e))return;const r=new Promise((r,o)=>{const t=()=>{e.removeEventListener("complete",$),e.removeEventListener("error",a),e.removeEventListener("abort",a)},$=()=>{r(),t()},a=()=>{o(e.error||new DOMException("AbortError","AbortError")),t()};e.addEventListener("complete",$),e.addEventListener("error",a),e.addEventListener("abort",a)});I.set(e,r)}let S={get(e,r,o){if(e instanceof IDBTransaction){if("done"===r)return I.get(e);if("objectStoreNames"===r)return e.objectStoreNames||Q.get(e);if("store"===r)return o.objectStoreNames[1]?void 0:o.objectStore(o.objectStoreNames[0])}return h(e[r])},set:(e,r,o)=>(e[r]=o,!0),has:(e,r)=>e instanceof IDBTransaction&&("done"===r||"store"===r)||r in e};function ka(e){S=e(S)}function U(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?ga().includes(e)?function(...r){return e.apply(B(this),r),h(N.get(this))}:function(...r){return h(e.apply(B(this),r))}:function(r,...o){const t=e.call(B(this),r,...o);return Q.set(t,r.sort?r.sort():[r]),h(t)}}function V(e){return"function"==typeof e?U(e):(e instanceof IDBTransaction&&ea(e),fa(e,ja())?new Proxy(e,S):e)}function h(e){if(e instanceof IDBRequest)return da(e);if(H.has(e))return H.get(e);const r=V(e);return r!==e&&(H.set(e,r),E.set(r,e)),r}const B=e=>E.get(e);const ba=["get","getKey","getAll","getAllKeys","count"],ca=["put","add","delete","clear"],A=new Map;function K(e,r){if(!(e instanceof IDBDatabase)||r in e||"string"!=typeof r)return;if(A.get(r))return A.get(r);const t=r.replace(/FromIndex$/,""),$=r!==t,n=ca.includes(t);if(!(t in($?IDBIndex:IDBObjectStore).prototype)||!n&&!ba.includes(t))return;const a=async function(e,...r){const a=this.transaction(e,n?"readwrite":"readonly");let o=a.store;$&&(o=o.index(r.shift()));const d=o[t](...r);return n&&(await a.done),d};return A.set(r,a),a}ka(e=>({...e,get:(r,t,$)=>K(r,t)||e.get(r,t,$),has:(r,t)=>!!K(r,t)||e.has(r,t)}));var g=j&&j.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(a,o){function i(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,s)}u((n=n.apply(e,t||[])).next())})},b=j&&j.__generator||function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue;}o=t.call(e,i)}catch(s){o=[6,s],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ha=j&&j.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<r;t++)for(var o=arguments[t],i=0,s=o.length;i<s;i++,a++)n[a]=o[i];return n},ia="esp-sw",na=1,C=function(){function e(e,t){this.dbName=e,this.dbVersion=t}return e.getInstance=function(){return e.instance||(e.instance=new e(ia,na)),e.instance},e.prototype.add=function(e,t){return g(this,void 0,void 0,function(){var r=this;return b(this,function(n){switch(n.label){case 0:return[4,this.openDb()];case 1:return n.sent(),setTimeout(function(){return g(r,void 0,void 0,function(){return b(this,function(e){switch(e.label){case 0:return[4,this.deleteOldEvents("logs")];case 1:return e.sent(),[2];}})})},0),[2,this.db.add(e,t)];}})})},e.prototype.deleteOldEvents=function(e){return g(this,void 0,void 0,function(){var t,r,n;return b(this,function(a){switch(a.label){case 0:return[4,this.openDb()];case 1:return a.sent(),[4,this.db.transaction(e,"readwrite").store.openCursor()];case 2:t=a.sent(),r=new Date().getTime(),n=864e5,a.label=3;case 3:return t?(r-t.value.timestamp>7*n&&t.delete(),[4,t.continue()]):[3,5];case 4:return t=a.sent(),[3,3];case 5:return[2];}})})},e.prototype.get=function(e,t){return g(this,void 0,void 0,function(){return b(this,function(r){switch(r.label){case 0:return[4,this.openDb()];case 1:return r.sent(),[2,this.db.get(e,t)];}})})},e.prototype.deleteRecord=function(e,t){return g(this,void 0,void 0,function(){return b(this,function(r){switch(r.label){case 0:return[4,this.openDb()];case 1:return r.sent(),[2,this.db.delete(e,t)];}})})},e.prototype.getLastRecord=function(e){return g(this,void 0,void 0,function(){var t;return b(this,function(r){switch(r.label){case 0:return[4,this.openDb()];case 1:return r.sent(),[4,this.db.getAll(e)];case 2:return t=r.sent()||[],[2,ha(t).pop()];}})})},e.prototype.set=function(e,t,r){return g(this,void 0,void 0,function(){return b(this,function(n){switch(n.label){case 0:return[4,this.openDb()];case 1:return n.sent(),[2,this.db.put(e,r,t)];}})})},e.prototype.openDb=function(){return g(this,void 0,void 0,function(){var e;return b(this,function(t){switch(t.label){case 0:return e=this,[4,Z(this.dbName,this.dbVersion,{upgrade:function(e){e.createObjectStore("variables"),e.createObjectStore("logs",{keyPath:"timestamp"}).createIndex("by-timestamp","timestamp")}})];case 1:return e.db=t.sent(),[2,this.db];}})})},e}();j.IndexedDBWrapper=C;function la(e){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(r){return e}}function ma(e){try{return e.data.json()||{}}catch(r){return{}}}function L(e){var r={};try{var t=ma(e);r.content=t.content,r.options=t.options,r.userData=t.userData}catch(o){r.content={},r.options={}}return r}var D={};var M=D&&D.__assign||function(){return(M=Object.assign||function(t){for(var e,r=1,a=arguments.length;r<a;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function X(t){var e=[],r={};return t.forEach(function(t,a){if(t&&t.title&&t.link){var i="click_to_button_"+(a+1);e.push({action:i,title:t.title}),r[i]=t.link}}),{linksByKey:r,list:e}}function P(t){var e=L(t),r=e.content,a=e.options,i=X(a.buttons||[]),n=M(M({},e),{linksForActionButtonsByKey:i.linksByKey}),o={actions:i.list,badge:r.badge||"",title:r.title||"",body:r.summary||"",data:n,renotify:a.renotify,requireInteraction:a.requireInteraction,silent:a.silent,tag:a.tag||e.userData||"",vibrate:a.vibrate||[]};return"image"in Notification.prototype?(o.icon=r.icon||"",o.image=r.bigImage||r.image||""):o.icon=r.image||r.icon||"",o}D.preparePayload=P;var k={},_=k&&k.__awaiter||function(t,n,o,e){return new(o||(o=Promise))(function(r,i){function a(t){try{c(e.next(t))}catch(n){i(n)}}function f(t){try{c(e.throw(t))}catch(n){i(n)}}function c(t){var n;t.done?r(t.value):(n=t.value,n instanceof o?n:new o(function(t){t(n)})).then(a,f)}c((e=e.apply(t,n||[])).next())})},aa=k&&k.__generator||function(t,n){var o,e,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function f(i){return function(f){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,e&&(r=2&i[0]?e.return:i[0]?e.throw||((r=e.return)&&r.call(e),0):e.next)&&!(r=r.call(e,i[1])).done)return r;switch(e=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,e=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue;}i=n.call(t,a)}catch(f){i=[6,f],e=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,f])}}};function y(t){var n;return(null===(n=null==t?void 0:t.notification)||void 0===n?void 0:n.data)||{}}function J(t){var n;return((null===(n=y(t))||void 0===n?void 0:n.linksForActionButtonsByKey)||{})[t.action]}function T(t){return _(this,void 0,void 0,function(){var n;return aa(this,function(o){return n=new Date().getTime(),[2,t&&"click"===t.eventName&&n-t.timestamp<200]})})}k.getNotificationData=y,k.getLinkForAction=J,k.isAutoCloseEventAfterClick=T;var v={};var F=v&&v.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(s,i){function a(t){try{u(n.next(t))}catch(e){i(e)}}function o(t){try{u(n.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,o)}u((n=n.apply(t,e||[])).next())})},G=v&&v.__generator||function(t,e){var r,n,s,i,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(s=2&i[0]?n.return:i[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,i[1])).done)return s;switch(n=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){a.label=i[1];break}if(6===i[0]&&a.label<s[1]){a.label=s[1],s=i;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(i);break}s[2]&&a.ops.pop(),a.trys.pop();continue;}i=e.call(t,a)}catch(o){i=[6,o],n=0}finally{r=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},O=function(){function t(){this.db=C.getInstance()}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.getApiHost=function(){return"//sandbox-api-esp.piano.io"},t.prototype.sendEventToServer=function(e,r){return F(this,void 0,void 0,function(){var n,s,i;return G(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),n=t.getApiHost(),[4,this.db.get("variables","visitor")];case 1:return s=a.sent(),[4,fetch(n+"/push/sw/event",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({eventName:e,userData:r,visitor:s})})];case 2:return a.sent(),[3,5];case 3:return i=a.sent(),[4,this.saveEvent("errorInJSlogic",i)];case 4:return a.sent(),[3,5];case 5:return[2];}})})},t.prototype.renewSubscription=function(e){return F(this,void 0,void 0,function(){var r,n,s,i,a,o;return G(this,function(u){switch(u.label){case 0:return u.trys.push([0,7,,9]),r=t.getApiHost(),[4,this.db.get("variables","pushPublisherUser")];case 1:return n=u.sent(),[4,this.db.get("variables","subscription")];case 2:return s=u.sent(),[4,this.db.get("variables","visitor")];case 3:return i=u.sent(),n?[4,e.registration.pushManager.getSubscription()]:[2];case 4:return(a=u.sent())&&s!==JSON.stringify(a)?[4,fetch(r+"/push/subscription/renew",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({subscription:a,userData:n,visitor:i})})]:[2];case 5:return u.sent(),[4,this.db.set("variables","subscription",JSON.stringify(a))];case 6:return u.sent(),[3,9];case 7:return o=u.sent(),[4,this.saveEvent("errorInJSlogic",o)];case 8:return u.sent(),[3,9];case 9:return[2];}})})},t.prototype.saveEvent=function(t,e){return F(this,void 0,void 0,function(){var r,n;return G(this,function(s){switch(s.label){case 0:return r=new Date().getTime(),n={eventName:t,timestamp:r,extra:e},[4,this.db.add("logs",n)];case 1:return s.sent(),[2];}})})},t}();v.EventsLogger=O;var q=w&&w.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function o(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}c((n=n.apply(e,t||[])).next())})},p=w&&w.__generator||function(e,t){var r,n,s,i,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(s=2&i[0]?n.return:i[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,i[1])).done)return s;switch(n=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){a.label=i[1];break}if(6===i[0]&&a.label<s[1]){a.label=s[1],s=i;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(i);break}s[2]&&a.ops.pop(),a.trys.pop();continue;}i=t.call(e,a)}catch(o){i=[6,o],n=0}finally{r=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},R=function(){function e(e){this.sw=e,this.eventsLogger=O.getInstance(),this.db=C.getInstance()}return e.getInstance=function(t){return e.instance||(e.instance=new e(t)),e.instance},e.prototype.handleCloseEvent=function(e){return q(this,void 0,void 0,function(){var t;return p(this,function(r){switch(r.label){case 0:return[4,this.db.getLastRecord("logs")];case 1:return t=r.sent(),[4,T(t)];case 2:return r.sent()?[2]:(e.notification.close(),[4,this.eventsLogger.sendEventToServer("close",y(e).userData)]);case 3:return r.sent(),[4,this.eventsLogger.saveEvent("close",null)];case 4:return r.sent(),[2];}})})},e.prototype.handleClickEvent=function(e){return q(this,void 0,void 0,function(){var t,r,n;return p(this,function(s){switch(s.label){case 0:return t=y(e),r=e.action?J(e):t.content.link,n=e.action||"click",[4,this.eventsLogger.saveEvent(n,{action:e.action,link:r,tag:t.options.tag})];case 1:return s.sent(),e.notification.close(),r?[4,this.sw.clients.openWindow(r)]:[3,4];case 2:return s.sent(),[4,this.eventsLogger.sendEventToServer(n,t.userData)];case 3:s.sent(),s.label=4;case 4:return[2];}})})},e.prototype.handleMessageEvent=function(e){return q(this,void 0,void 0,function(){var t,r;return p(this,function(n){switch(n.label){case 0:if((t=la(e.data))&&"piano-esp-sdk"!==t.namespace)return[2];if(!(r=t&&t.type))return[2];switch(r){case"visitorSync":return[3,1];case"subscriptionWasAdded":return[3,5];}return[3,9];case 1:return[4,this.db.set("variables","visitor",t.visitor)];case 2:return n.sent(),[4,this.eventsLogger.saveEvent("messageFromSDK",t)];case 3:return n.sent(),[4,this.eventsLogger.renewSubscription(this.sw)];case 4:return n.sent(),[3,10];case 5:return[4,this.db.set("variables","pushPublisherUser",t.pushPublisherUser)];case 6:return n.sent(),[4,this.db.set("variables","subscription",JSON.stringify(t.subscription))];case 7:return n.sent(),[4,this.eventsLogger.saveEvent("messageFromSDK",t)];case 8:return n.sent(),[3,10];case 9:return[3,10];case 10:return[2];}})})},e.prototype.handlePushEvent=function(e){return q(this,void 0,void 0,function(){var t,r;return p(this,function(n){switch(n.label){case 0:return t=L(e),[4,this.eventsLogger.sendEventToServer("received",t.userData)];case 1:return n.sent(),[4,this.eventsLogger.saveEvent("received",t)];case 2:return n.sent(),(r=P(e)).title?[3,4]:[4,this.eventsLogger.saveEvent("noData",r)];case 3:return n.sent(),[2];case 4:return[4,this.sw.registration.showNotification(r.title,r)];case 5:return n.sent(),[4,this.eventsLogger.saveEvent("shown",t)];case 6:return n.sent(),[2];}})})},e.prototype.handlePushSubscriptionChangedEvent=function(e){return q(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,this.eventsLogger.renewSubscription(this.sw)];case 1:return e.sent(),[2];}})})},e}();w.EspSWApp=R;var z=l&&l.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(a,i){function o(e){try{s(r.next(e))}catch(n){i(n)}}function u(e){try{s(r.throw(e))}catch(n){i(n)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,u)}s((r=r.apply(e,n||[])).next())})},x=l&&l.__generator||function(e,n){var t,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue;}i=n.call(e,o)}catch(u){i=[6,u],r=0}finally{t=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},m=R.getInstance(self);self.addEventListener("message",function(e){return z(void 0,void 0,void 0,function(){return x(this,function(n){return e.waitUntil(m.handleMessageEvent(e)),[2]})})}),self.addEventListener("push",function(e){return z(void 0,void 0,void 0,function(){return x(this,function(n){return e.waitUntil(m.handlePushEvent(e)),[2]})})}),self.addEventListener("notificationclose",function(e){return z(void 0,void 0,void 0,function(){return x(this,function(n){return e.waitUntil(m.handleCloseEvent(e)),[2]})})}),self.addEventListener("notificationclick",function(e){return z(void 0,void 0,void 0,function(){return x(this,function(n){return e.waitUntil(m.handleClickEvent(e)),[2]})})}),self.addEventListener("pushsubscriptionchange",function(e){e.waitUntil(m.handlePushSubscriptionChangedEvent(e))}),self.addEventListener("install",function(e){self.skipWaiting()});if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=l}else if(typeof define==="function"&&define.amd){define(function(){return l})}})();